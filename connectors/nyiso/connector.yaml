name: "nyiso"
description: "NYISO connector for LBMP, ICAP, TCC, and generator outage datasets via OASIS/REST APIs"
version: "1.1.0"

# Connector configuration
config:
  api_key: "${NYISO_API_KEY}"
  # username: "${NYISO_USERNAME}"
  # password: "${NYISO_PASSWORD}"
  oasis_base_url: "${NYISO_OASIS_BASE_URL:https://www.nyiso.com/oasis/api}"
  rest_base_url: "${NYISO_REST_BASE_URL:https://www.nyiso.com/api}"
  api_timeout: 60
  retry_attempts: 3
  retry_delay_seconds: 15
  max_concurrent_requests: 2
  default_start_hours_back: 24

market: "NYISO"
mode: "batch"
schedule: "0 * * * *"
enabled: true
output_topic: "ingestion.nyiso.raw.v1"
schema: "../../../specs/events/market/ingestion.market.ticks.raw.v1.avsc"
retries: 3
backoff_seconds: 30
tenant_strategy: "single"
transforms:
  - name: sanitize_numeric

tags:
  - market-data
  - energy
  - nyiso
  - outages

# Supported data types
supported_data_types:
  - "lbmp"
  - "rt_lbmp"
  - "icap"
  - "tcc"
  - "outages"

# Dataset-specific schedules
dataset_schedules:
  lbmp: "0 * * * *"
  rt_lbmp: "0 * * * *"
  icap: "0 0 1 * *"
  tcc: "15 4 * * *"
  outages: "0 */6 * * *"

# Output topics (normalized)
output_topics:
  lbmp: "normalized.market.ticks.v1"
  rt_lbmp: "normalized.market.ticks.v1"
  icap: "normalized.market.ticks.v1"
  tcc: "normalized.market.ticks.v1"
  outages: "normalized.market.ticks.v1"

# Quality checks
quality_checks:
  - name: "record_count_check"
    enabled: true
    min_records: 1

  - name: "timestamp_check"
    enabled: true
    max_age_hours: 2

  - name: "price_range_check"
    enabled: true
    min_price: -500
    max_price: 10000
