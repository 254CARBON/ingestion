# SeaTunnel Configuration Template for New Connectors

env {
  parallelism = 2
  job.mode = "BATCH"  # or "STREAMING"
  checkpoint.interval = 1000
}

source {
  # Replace with your connector name
  YourConnector {
    market = "YOUR_MARKET"
    endpoint = "${YOUR_API_URL}"
    authToken = "${YOUR_API_TOKEN}"
    mode = "batch"  # or "streaming"
    
    # Batch mode parameters
    startDate = "${START_DATE}"
    endDate = "${END_DATE}"
    
    # Streaming mode parameters
    pollInterval = 5000
    maxRecordsPerPoll = 1000
    
    # Common parameters
    retryAttempts = 3
    retryDelay = 1000
    timeout = 30000
  }
}

transform {
  JsonFlattener {}
  TimezoneStandardizer { 
    target_tz = "UTC" 
  }
  DataValidator {
    schema_path = "schemas/raw_your_market_trade.avsc"
    strict_mode = false
  }
  QualityChecker {
    completeness_threshold = 0.95
    accuracy_threshold = 0.90
  }
  DataEnricher {
    addMetadata = true
    addTimestamps = true
  }
}

sink {
  Kafka {
    topic = "ingestion.yourmarket.raw.v1"
    bootstrapServers = "${KAFKA_BOOTSTRAP}"
    format = "json"
    producerConfig = {
      "acks" = "all"
      "retries" = 3
      "batch.size" = 16384
      "linger.ms" = 5
      "buffer.memory" = 33554432
    }
  }
}
